asyncapi: 3.0.0
info:
  title: Order Fulfillment Service
  version: 1.0.0
  description: '## Order Fulfillment Service


    This service consumes order events from SQS (bridged from Kafka via Redpanda Connect).


    ### Events Consumed


    - **OrderCreated**: Triggers the fulfillment process


    ### Processing Pipeline


    ```

    Kafka → Redpanda Connect → SQS → Consumer

    ```

    '
defaultContentType: application/json
servers:
  localstack:
    host: localstack:4566
    protocol: sqs
    description: LocalStack SQS endpoint
channels:
  order-events:
    address: order-events
    description: SQS queue receiving order events bridged from Kafka
    messages:
      OrderCreated:
        $ref: '#/components/messages/OrderCreated'
operations:
  receiveOrderCreated:
    action: receive
    channel:
      $ref: '#/channels/order-events'
    summary: Receive order created events from SQS
    messages:
    - $ref: '#/channels/order-events/messages/OrderCreated'
components:
  messages:
    OrderCreated:
      name: OrderCreated
      title: Order Created Event
      summary: Event emitted when a new order is created by a customer
      description: 'Generated from Avro schema: schemas/order_created.avsc

        Namespace: com.example.orders.events'
      contentType: application/json
      payload:
        $ref: '#/components/schemas/OrderCreated'
  schemas:
    OrderCreated:
      type: object
      properties:
        order_id:
          type: string
          description: Unique identifier for the order
        customer_id:
          type: string
          description: Unique identifier for the customer placing the order
        customer_email:
          type: string
          description: Customer email for notifications
        items:
          type: array
          items:
            type: object
            properties:
              product_id:
                type: string
                description: Unique identifier for the product
              product_name:
                type: string
                description: Name of the product
              quantity:
                type: integer
                description: Quantity ordered
              unit_price:
                type: string
                description: Price per unit in dollars
            required:
            - product_id
            - product_name
            - quantity
            - unit_price
          description: List of items in the order
        total_amount:
          type: string
          description: Total order amount in dollars
        shipping_address:
          type: object
          properties:
            street:
              type: string
            city:
              type: string
            state:
              type: string
            zip_code:
              type: string
            country:
              type: string
              default: USA
          required:
          - street
          - city
          - state
          - zip_code
          description: Shipping address for the order
        created_at:
          type: string
          format: date-time
          description: Timestamp when the order was created
        metadata:
          type: object
          additionalProperties:
            type: string
          description: Additional metadata for the order
          default: {}
      required:
      - order_id
      - customer_id
      - customer_email
      - items
      - total_amount
      - shipping_address
      - created_at
      description: Event emitted when a new order is created by a customer

