asyncapi: 3.0.0
info:
  title: Order Producer Service
  version: 1.0.0
  description: '## Order Producer Service


    This service generates order events and publishes them to Kafka.


    ### Events Published


    - **OrderCreated**: Emitted when a new order is placed


    ### Schema Registry


    Events use Avro schemas registered in the Redpanda Schema Registry: `http://localhost:18081`

    '
defaultContentType: application/vnd.apache.avro+json
servers:
  development:
    host: localhost:19092
    protocol: kafka
    description: Local Redpanda broker
channels:
  orders.created:
    address: orders.created
    description: Topic for newly created order events
    messages:
      OrderCreated:
        $ref: '#/components/messages/OrderCreated'
operations:
  publishOrderCreated:
    action: send
    channel:
      $ref: '#/channels/orders.created'
    summary: Publish a new order event
    messages:
    - $ref: '#/channels/orders.created/messages/OrderCreated'
components:
  messages:
    OrderCreated:
      name: OrderCreated
      title: Order Created Event
      summary: Event emitted when a new order is created by a customer
      contentType: application/vnd.apache.avro+json
      payload:
        schemaFormat: application/vnd.apache.avro+json;version=1.9.0
        schema:
          type: record
          name: OrderCreated
          namespace: com.example.orders.events
          doc: Event emitted when a new order is created by a customer
          fields:
          - name: order_id
            type: string
            doc: Unique identifier for the order
          - name: customer_id
            type: string
            doc: Unique identifier for the customer placing the order
          - name: customer_email
            type: string
            doc: Customer email for notifications
          - name: items
            type:
              type: array
              items:
                type: record
                name: OrderItem
                fields:
                - name: product_id
                  type: string
                  doc: Unique identifier for the product
                - name: product_name
                  type: string
                  doc: Name of the product
                - name: quantity
                  type: int
                  doc: Quantity ordered
                - name: unit_price
                  type:
                    type: bytes
                    logicalType: decimal
                    precision: 10
                    scale: 2
                  doc: Price per unit in dollars
            doc: List of items in the order
          - name: total_amount
            type:
              type: bytes
              logicalType: decimal
              precision: 10
              scale: 2
            doc: Total order amount in dollars
          - name: shipping_address
            type:
              type: record
              name: Address
              fields:
              - name: street
                type: string
              - name: city
                type: string
              - name: state
                type: string
              - name: zip_code
                type: string
              - name: country
                type: string
                default: USA
            doc: Shipping address for the order
          - name: created_at
            type:
              type: long
              logicalType: timestamp-millis
            doc: Timestamp when the order was created
          - name: metadata
            type:
              type: map
              values: string
            doc: Additional metadata for the order
            default: {}

